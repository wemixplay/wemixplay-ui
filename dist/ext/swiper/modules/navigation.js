"use strict";var a=require("../shared/create-element-if-not-defined.js"),n=require("../shared/utils.js");module.exports=function(e){let{swiper:i,extendParams:t,on:s,emit:l}=e;function o(a){let n;return a&&"string"==typeof a&&i.isElement&&(n=i.el.querySelector(a),n)?n:(a&&("string"==typeof a&&(n=[...document.querySelectorAll(a)]),i.params.uniqueNavElements&&"string"==typeof a&&n&&n.length>1&&1===i.el.querySelectorAll(a).length?n=i.el.querySelector(a):n&&1===n.length&&(n=n[0])),a&&!n?a:n)}function r(a,e){const t=i.params.navigation;(a=n.m(a)).forEach((a=>{a&&(a.classList[e?"add":"remove"](...t.disabledClass.split(" ")),"BUTTON"===a.tagName&&(a.disabled=e),i.params.watchOverflow&&i.enabled&&a.classList[i.isLocked?"add":"remove"](t.lockClass))}))}function d(){const{nextEl:a,prevEl:n}=i.navigation;if(i.params.loop)return r(n,!1),void r(a,!1);r(n,i.isBeginning&&!i.params.rewind),r(a,i.isEnd&&!i.params.rewind)}function c(a){a.preventDefault(),(!i.isBeginning||i.params.loop||i.params.rewind)&&(i.slidePrev(),l("navigationPrev"))}function p(a){a.preventDefault(),(!i.isEnd||i.params.loop||i.params.rewind)&&(i.slideNext(),l("navigationNext"))}function v(){const e=i.params.navigation;if(i.params.navigation=a.c(i,i.originalParams.navigation,i.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!e.nextEl&&!e.prevEl)return;let t=o(e.nextEl),s=o(e.prevEl);Object.assign(i.navigation,{nextEl:t,prevEl:s}),t=n.m(t),s=n.m(s);const l=(a,n)=>{a&&a.addEventListener("click","next"===n?p:c),!i.enabled&&a&&a.classList.add(...e.lockClass.split(" "))};t.forEach((a=>l(a,"next"))),s.forEach((a=>l(a,"prev")))}function g(){let{nextEl:a,prevEl:e}=i.navigation;a=n.m(a),e=n.m(e);const t=(a,n)=>{a.removeEventListener("click","next"===n?p:c),a.classList.remove(...i.params.navigation.disabledClass.split(" "))};a.forEach((a=>t(a,"next"))),e.forEach((a=>t(a,"prev")))}t({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),i.navigation={nextEl:null,prevEl:null},s("init",(()=>{!1===i.params.navigation.enabled?m():(v(),d())})),s("toEdge fromEdge lock unlock",(()=>{d()})),s("destroy",(()=>{g()})),s("enable disable",(()=>{let{nextEl:a,prevEl:e}=i.navigation;a=n.m(a),e=n.m(e),i.enabled?d():[...a,...e].filter((a=>!!a)).forEach((a=>a.classList.add(i.params.navigation.lockClass)))})),s("click",((a,e)=>{let{nextEl:t,prevEl:s}=i.navigation;t=n.m(t),s=n.m(s);const o=e.target;let r=s.includes(o)||t.includes(o);if(i.isElement&&!r){const a=e.path||e.composedPath&&e.composedPath();a&&(r=a.find((a=>t.includes(a)||s.includes(a))))}if(i.params.navigation.hideOnClick&&!r){if(i.pagination&&i.params.pagination&&i.params.pagination.clickable&&(i.pagination.el===o||i.pagination.el.contains(o)))return;let a;t.length?a=t[0].classList.contains(i.params.navigation.hiddenClass):s.length&&(a=s[0].classList.contains(i.params.navigation.hiddenClass)),l(!0===a?"navigationShow":"navigationHide"),[...t,...s].filter((a=>!!a)).forEach((a=>a.classList.toggle(i.params.navigation.hiddenClass)))}}));const m=()=>{i.el.classList.add(...i.params.navigation.navigationDisabledClass.split(" ")),g()};Object.assign(i.navigation,{enable:()=>{i.el.classList.remove(...i.params.navigation.navigationDisabledClass.split(" ")),v(),d()},disable:m,update:d,init:v,destroy:g})};
