"use strict";var e=require("@babel/runtime/regenerator"),r=require("../_virtual/_tslib.js"),t=require('./../ext/lodash/get.js'),n=function(t){return new Promise((function(n,a){var o=new FileReader;o.onload=function(){return r.__awaiter(void 0,void 0,void 0,e.mark((function r(){var t;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"string"==typeof o.result?n(o.result):(t=new TextDecoder,n(t.decode(o.result)));case 1:case"end":return e.stop()}}),r)})))},o.onerror=a,o.readAsDataURL(t)}))},a=function(e,r){return new Promise((function(t,n){/\.(jpg|jpeg|png|gif|webp)$/i.test(e.name)?t(!0):(r&&(r.target.value=""),n(new Error("onlyImage")))}))};exports.imageFileUpload=function(o){return r.__awaiter(void 0,void 0,void 0,e.mark((function r(){var i,u;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=t.default(o,"target.files[0]",null))){e.next=8;break}return e.next=4,a(i,o);case 4:return e.next=6,n(i);case 6:return u=e.sent,e.abrupt("return",{file:i,dataUrl:u||""});case 8:throw new Error("uploadFailed");case 9:case"end":return e.stop()}}),r)})))},exports.readAsDataURLAsync=n;
