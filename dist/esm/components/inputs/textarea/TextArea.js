import e from"@babel/runtime/helpers/slicedToArray";import{__rest as r}from"../../../_virtual/_tslib.js";import t,{forwardRef as a,useRef as n,useState as l,useCallback as o,useEffect as s,useImperativeHandle as u}from"react";import{makeCxFunc as c}from"../../../utils/forReactUtils.js";import{commaWithValue as i}from"../../../utils/valueParserUtils.js";import m from"./TextArea.module.scss.js";var v=c(m),h=a((function(a,c){var m=a.className,h=void 0===m?"":m,f=a.maxLength,g=a.error,p=a.handleChange,d=r(a,["className","value","maxLength","error","info","handleChange"]),x=n(),b=l(0),E=e(b,2),j=E[0],C=E[1],N=o((function(e){var r=e.target,t=r.value,a=r.name;p&&p(t,a),d.onChange&&d.onChange(e),C(t.length)}),[p,d]);return s((function(){var e;x.current&&C((null!==(e=x.current.value)&&void 0!==e?e:"").length)}),[]),s((function(){x.current&&x.current.value.length>f&&(x.current.value=x.current.value.slice(0,f),dispatchEvent(new Event("change",{bubbles:!0})))}),[f]),u(c,(function(){return x.current})),t.createElement("div",{className:v(h,"text-area",{error:g})},t.createElement("textarea",Object.assign({ref:x},d,{maxLength:f,onChange:N})),!!f&&t.createElement("p",{className:v("text-count")},t.createElement("strong",null,i(j)),"/",i(f)))}));h.displayName="TextArea";var f=h;export{f as default};
