import e from"@babel/runtime/helpers/slicedToArray";import{__rest as n}from"../../../_virtual/_tslib.js";import r,{forwardRef as t,useRef as a,useState as o,useMemo as s,useCallback as i,useEffect as u,useImperativeHandle as l}from"react";import{makeCxFunc as c}from"../../../utils/forReactUtils.js";import f from"../../../assets/svgs/ico-input-reset.svg.js";import m from"../../../assets/svgs/ico-search-default.svg.js";import d from"./TextInput.module.scss.js";var v=c(d),p=t((function(t,c){var d=t.className,p=void 0===d?"":d,h=t.error,g=t.info,y=t.hideBtnReset,E=t.prefixIcon,b=t.searchIcon,N=void 0===b?r.createElement(m,null):b,x=t.resetIcon,I=void 0===x?r.createElement(f,null):x,j=t.handleChange,w=t.handleReset,C=t.handleEnter,T=t.validate,B=n(t,["className","error","info","hideBtnReset","prefixIcon","searchIcon","resetIcon","handleChange","handleReset","handleEnter","validate"]),R=n(B,["value"]),D=a(null),F=o(!1),K=e(F,2),O=K[0],S=K[1],q=o(""),_=e(q,2),k=_[0],A=_[1],M=s((function(){var e=B.type,n=B.readOnly;return{reset:O&&!y&&!!k&&!n,search:"search"===e}}),[B,k,O,y]),U=i((function(e){return e&&T?"function"==typeof T?T(e):"string"==typeof e?T.test(e)?e:k:e:e}),[k,T]),V=i((function(){var e=B.name;A(""),j&&j("",e),w&&w("",e,!0)}),[B.name,j,w]),W=i((function(e){var n=e.target.name,r=e.target.value;if(r!==k){"number"==typeof B.value&&(r=Number(r));var t=U(r);j&&j(t,n),B.onChange&&B.onChange(e),A(t),D.current.value=String(t),""===t&&w&&w("",n)}}),[k,U,j,B,w]),z=i((function(e,n){S(n),n?B.onFocus&&B.onFocus(e):B.onBlur&&B.onBlur(e)}),[B]),G=i((function(e){var n,r=e.target,t=r.value,a=void 0===t?"":t,o=r.name;C&&C(a,o),null===(n=D.current)||void 0===n||n.blur()}),[C]),H=i((function(e){"Enter"!==e.key||e.nativeEvent.isComposing||G(e),B.onKeyDown&&B.onKeyDown(e)}),[B,G]);return u((function(){void 0!==B.value&&(A(B.value),D.current.value=String(B.value))}),[B.value]),u((function(){D.current&&"function"==typeof D.current.scrollTo&&D.current.scrollTo(window.innerWidth,0)}),[M.reset]),l(c,(function(){return D.current})),r.createElement("div",{className:v("text-input",p,B.type,{focus:O,filled:!!k,readonly:B.readOnly,disabled:B.disabled,required:B.required,error:h,info:g})},r.createElement("div",{className:v("input-area")},M.search&&r.createElement("span",{className:v("ico-prefix")},N),!M.search&&!!E&&r.createElement("span",{className:v("ico-prefix")},E),M.reset&&r.createElement("button",{className:v("ico-reset"),onMouseDown:V,onTouchStart:V},I),r.createElement("input",Object.assign({ref:D},R,{defaultValue:k,onChange:W,onFocus:function(e){return z(e,!0)},onBlur:function(e){return z(e,!1)},onKeyDown:H}))))}));p.displayName="TextInput";var h=p;export{h as default};
