import e from"@babel/runtime/helpers/toConsumableArray";import r,{forwardRef as n,useRef as a,useId as t,useMemo as o,useCallback as c,useEffect as l,useImperativeHandle as i}from"react";import s from"./CheckBox.module.scss.js";import u from"../../../assets/svgs/ico-check.svg.js";import m from"../../../assets/svgs/ico-indeterminate.svg.js";import{makeCxFunc as d}from"../../../utils/forReactUtils.js";import y from'./../../../ext/lodash/uniq.js';var f=d(s),h=n((function(n,s){var d=n.className,h=void 0===d?"":d,A=n.name,v=n.size,p=void 0===v?"normal":v,g=n.checkValue,k=void 0===g||g,b=n.unCheckValue,E=void 0!==b&&b,x=n.value,C=n.children,N=n.disabled,B=n.readOnly,j=n.onChange,w=n.onBlur,q=n.onFocus,S=n.handleChange,F=a(null),O=t(),V=o((function(){if(void 0!==x)return Array.isArray(k)&&Array.isArray(x)?x.length===k.length&&x.every((function(e){return k.includes(e)})):Array.isArray(x)?x.includes(k):x===k}),[x,k]),z=o((function(){return!V&&(!(!Array.isArray(k)||!Array.isArray(x))&&(x.length!==k.length&&x.some((function(e){return k.includes(e)}))))}),[V,k,x]),I=c((function(r){var n=r.target,a=n.name,t=n.checked,o='input[name="'.concat(a,'"]'),c=document.querySelectorAll(o);if(Array.isArray(k)&&Array.isArray(x))S&&S(x.length>0?[]:k,a);else{if(c.length>1||Array.isArray(x)){for(var l=document.querySelectorAll("".concat(o,":checked")),i=[],s=k,u=x?e(x):void 0,m=function(){var e="number"==typeof k?Number(l[d].value):l[d].value;-1===i.findIndex((function(r){return r===e}))&&i.push(e)},d=0;d<l.length;d+=1)m();u&&void 0!==s&&u.push(s),i=u?u.filter((function(e){return i.includes(e)})):y(i),S&&S(i,a)}else S&&S(t?k:E,a);j&&j(r)}}),[x,E,S,j,k]);return l((function(){var e='input[name="'.concat(A||O,'"]');if(document.querySelectorAll(e).length>1||Array.isArray(x)){if("boolean"==typeof k)throw new Error("여러개의 동일한 name 값을 갖거나 data가 배열로 전달된 CheckBox는 boolean타입의 value를 받을 수 없습니다.")}else if(Array.isArray(x))throw new Error("단일의 name 값을 갖는 CheckBox는 배열 타입의 data를 가질 수 없습니다.")}),[x,A,O,k]),l((function(){F.current&&(F.current.indeterminate=z)}),[z]),i(s,(function(){return F.current})),r.createElement("div",{className:f(h,"checkbox",p,{readonly:B,disabled:N,"not-allow":B||N})},r.createElement("label",null,r.createElement("input",{ref:F,type:"checkbox",name:Array.isArray(k)?O:A||O,value:String(k),checked:V,readOnly:B,disabled:N,onBlur:w,onFocus:q,onChange:I}),r.createElement("span",{className:f("ico-check")},r.createElement("i",{className:f("icon")},z?r.createElement(m,{className:f("partial")}):r.createElement(u,{className:f("check")}))),r.createElement("span",{className:f("text")},C)))}));h.displayName="CheckBox";var A=h;export{A as default};
