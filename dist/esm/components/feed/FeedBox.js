import e,{forwardRef as t,useId as o,useRef as n,useCallback as i,useImperativeHandle as a}from"react";import r from"./FeedBox.module.scss.js";import c from"./FeedImagesView.js";import l from"../popover/PopoverButton.js";import m from"../../assets/svgs/ico-h-dots.svg.js";import s from"./FeedEmojiArea.js";import d from"./FeedEtcInfoArea.js";import f from"./FeedWriterInfo.js";import p from"./FeedTextContent.js";import C from"./FeedLinkPreview.js";import g from"./FeedIframesView.js";import{makeCxFunc as k}from"../../utils/forReactUtils.js";var v=k(r),E=t((function(t,r){var k=t.className,E=void 0===k?"":k,u=t.writerName,h=t.writerImg,j=t.channelName,N=t.channelImg,I=t.channelIsOfficial,F=t.categoryName,B=t.certificated,x=t.textContent,S=t.images,M=void 0===S?[]:S,w=t.media,y=void 0===w?[]:w,P=t.ogMetaData,A=t.managePopoverElement,L=void 0===A?e.createElement(e.Fragment,null):A,b=t.emojiSelectPopoverElement,T=void 0===b?e.createElement(e.Fragment,null):b,V=t.emojiList,W=void 0===V?[]:V,z=t.commentCount,D=void 0===z?0:z,H=t.likeCount,O=void 0===H?0:H,R=t.isMyLike,U=t.avatarSize,q=void 0===U?32:U,G=t.intersectionVideo,J=t.createdAt,K=t.updatedAt,Q=t.locale,X=void 0===Q?"en":Q,Y=t.textEllipsis,Z=void 0===Y||Y,$=t.hideFooter,_=void 0!==$&&$,ee=t.onClick,te=t.onMentionClick,oe=t.onHashTagClick,ne=t.onManageBtnClick,ie=t.onEmojiSelectBtnClick,ae=t.onEmojiClick,re=t.onShareBtnClick,ce=t.onImageClick,le=t.onLikeBtnClick,me=t.onCommentBtnClick,se=t.onWriterProfileClick,de=t.onChannelClick,fe=o(),pe=n(),Ce=n(),ge=i((function(e){e.stopPropagation(),ne&&ne(e)}),[ne]);return a(r,(function(){return pe.current.iframeRef=Ce.current,pe.current})),e.createElement("article",{ref:pe,className:v(E,"feed-box",{"has-click-event":ee}),onClick:ee},e.createElement("div",{className:v("feed-box-container")},e.createElement("div",{className:v("feed-header")},e.createElement(f,{className:v("profile"),name:u,profileImg:h,profileSize:q,channelName:j,channelImg:N,channelIsOfficial:I,categoryName:F,certificated:B,createdAt:J,updatedAt:K,locale:X,onWriterProfileClick:se,onChannelClick:de}),L||ne?e.createElement("div",{className:v("btn-manage")},e.createElement(l,{anchorId:ne?"":"feed-manage-".concat(fe.replace(/:/gi,"")),id:"feed-manage-".concat(fe.replace(/:/gi,"")),popoverStyle:{right:-10,top:10,zIndex:999},popoverElement:L,popoverAnimation:{name:"modal-pop-fade",duration:300},whenWindowScrollClose:!0,onClick:ge},e.createElement(m,{width:32,height:32}))):e.createElement(e.Fragment,null)),e.createElement("div",{className:v("feed-body")},e.createElement(p,{className:v("text-content"),content:x,ellipsis:Z,onTextClick:ee,onMentionClick:te,onHashTagClick:oe}),M.length>0&&e.createElement(c,{className:v("carousel"),images:M.map((function(e){return"string"==typeof e?{src:e}:{src:e.src,inappositeMsg:e.inappositeMsg}})),onImageClick:ce}),y.length>0&&e.createElement(g,{ref:Ce,className:v("carousel"),media:y,intersectionVideo:G}),!!P&&e.createElement(C,{ogMetaData:P})),!_&&e.createElement("div",{className:v("feed-footer")},e.createElement("div",{className:v("feed-footer-container")},e.createElement(s,{className:v("feed-reactions"),emojiList:W,emojiSelectPopoverElement:T,onEmojiClick:ae,onEmojiSelectBtnClick:ie}),e.createElement(d,{className:v("feed-comments"),commentCount:D,likeCount:O,isMyClick:R,onLikeBtnClick:le,onShareBtnClick:re,onCommentBtnClick:me})))))}));E.displayName="FeedBox";export{E as default};
