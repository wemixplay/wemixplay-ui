"use client";
import e,{useRef as s,useState as t,useCallback as a,useEffect as n}from"react";import r from"./FeedImagesView.module.scss.js";import l from"../carousel/Carousel.js";import c from"../../assets/svgs/icon-cancel-mono.svg.js";import i from"../../assets/svgs/icon-eye-off.svg.js";import o from"../../assets/svgs/icon-image.svg.js";import{makeCxFunc as m}from"../../utils/forReactUtils.js";import g from"../loadings/Spinner.js";const p=m(r),d=r=>{let{className:m="",images:d=[],handleDeleteImg:v,onImageClick:u}=r;const E=s(d),[f,N]=t({}),h=a((e=>{let{src:s,index:t,e:a}=e;a.stopPropagation(),u&&u({src:s,index:t})}),[u]),j=a((e=>{N((s=>Object.assign(Object.assign({},s),{[e]:!0})))}),[]);return n((()=>{N((e=>d.reduce(((s,t)=>(s[t.src]=e[t.src],s)),{})))}),[d]),e.createElement("div",{className:p(m,"images-upload-preview",{"is-preview":!!v}),onClick:e=>{e.stopPropagation()}},e.createElement(l,{className:p("image-preview-slider"),freeMode:!!v,pagination:!v&&d.length>1,navigation:!v&&d.length>1,loop:!1,slidesPerView:v?"auto":1,spaceBetween:v?4:0,onSlidesLengthChange:e=>{E.current.length<d.length&&setTimeout((()=>{e.slideTo(d.length-1,200)}),200),E.current=d}},d.map(((s,t)=>e.createElement("div",{key:"".concat(s.src,"-").concat(t)},!!v&&e.createElement("button",{className:p("btn-img-delete"),onClick:()=>v({deleteIndex:t})},e.createElement(c,null)),e.createElement("div",{key:s.src,className:p("preview-image-box",{"has-click-event":u,error:f[s.src]}),onClick:e=>h({src:s.src,index:t,e:e})},!!s.loading&&e.createElement("div",{className:p("loading")},e.createElement(g,null)),!!s.inappositeMsg&&e.createElement("div",{className:p("senstive-content-layer")},e.createElement("div",{className:p("senstive-content")},e.createElement(i,null),e.createElement("p",null,s.inappositeMsg))),e.createElement("img",{src:s.src,alt:s.src,onError:()=>j(s.src)}),!!f[s.src]&&e.createElement("div",{className:p("no-image")},e.createElement(o,null),e.createElement("span",null,"No Image"))))))))};export{d as default};
