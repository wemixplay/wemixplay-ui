import e from"@babel/runtime/helpers/defineProperty";import t from"@babel/runtime/helpers/slicedToArray";import n,{useRef as r,useState as s,useCallback as a,useEffect as i}from"react";import o from"./FeedImagesView.module.scss.js";import c from"../carousel/Carousel.js";import l from"../../assets/svgs/ico-delete-x.svg.js";import m from"../../assets/svgs/ico-senstive.svg.js";import u from"../../assets/svgs/noimage-placeholder.svg.js";import{makeCxFunc as g}from"../../utils/forReactUtils.js";import p from"../loadings/Spinner.js";var d=g(o),v=function(o){var g=o.className,v=void 0===g?"":g,f=o.images,E=void 0===f?[]:f,h=o.handleDeleteImg,N=o.onImageClick,b=r(E),j=s({}),k=t(j,2),w=k[0],x=k[1],C=a((function(e){var t=e.src,n=e.index;e.e.stopPropagation(),N&&N({src:t,index:n})}),[N]),y=a((function(t){var n=t.target.src;x((function(t){return Object.assign(Object.assign({},t),e({},n,!0))}))}),[]);return i((function(){x((function(e){return E.reduce((function(t,n){return t[n.src]=e[n.src],t}),{})}))}),[E]),n.createElement("div",{className:d(v,"images-upload-preview",{"is-preview":!!h}),onClick:function(e){e.stopPropagation()}},n.createElement(c,{className:d("image-preview-slider"),freeMode:!!h,pagination:!h&&E.length>1,navigation:!h&&E.length>1,loop:!1,slidesPerView:h?"auto":1,spaceBetween:h?4:0,onSlidesLengthChange:function(e){b.current.length<E.length&&setTimeout((function(){e.slideTo(E.length-1,200)}),200),b.current=E}},E.map((function(e,t){return n.createElement("div",{key:"".concat(e.src,"-").concat(t)},!!h&&n.createElement("button",{className:d("btn-img-delete"),onClick:function(){return h({deleteIndex:t})}},n.createElement(l,null)),n.createElement("div",{key:e.src,className:d("preview-image-box",{"has-click-event":N,error:w[e.src]}),onClick:function(n){return C({src:e.src,index:t,e:n})}},!!e.loading&&n.createElement("div",{className:d("loading")},n.createElement(p,null)),!!e.inappositeMsg&&n.createElement("div",{className:d("senstive-content-layer")},n.createElement("div",{className:d("senstive-content")},n.createElement(m,null),n.createElement("p",null,e.inappositeMsg))),n.createElement("img",{src:e.src,alt:e.src,onError:y}),!!w[e.src]&&n.createElement("div",{className:d("no-image")},n.createElement(u,null),n.createElement("span",null,"No Image"))))}))))};export{v as default};
