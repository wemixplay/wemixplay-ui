import e,{useMemo as t,useCallback as o}from"react";import s from"../../hooks/useCheckDevice.js";import i from"../editor/WpEditorContents.js";import n from"../ellipsis/Ellipsis.js";import{convertMarkdownToHtmlStr as r}from"../../utils/valueParserUtils.js";import{makeCxFunc as l}from"../../utils/forReactUtils.js";import a from"./FeedTextContent.module.scss.js";import{sanitize as c}from"isomorphic-dompurify";var m=l(a),p=function(l){var a=l.className,p=l.content,d=l.ellipsis,u=l.enableShowMore,f=l.onTextClick,h=l.onHashTagClick,v=l.onMentionClick,g=s(),C=g.isDesktop,k=g.isMobile,x=g.isTablet,L=t((function(){return c(r(null!=p?p:""),{ADD_ATTR:["target"]})}),[p]),T=o((function(e){var t,o,s=e.target,i=null!==(o=null===(t=s.dataset)||void 0===t?void 0:t.id)&&void 0!==o?o:"",n=s.textContent;s.classList.contains("mention")&&s.classList.contains("complete-mention")?v&&v({id:i,name:n.replace("@","")}):s.classList.contains("hash")&&s.classList.contains("complete-hash")?h&&h({id:i,name:n.replace("#","")}):"A"!==s.tagName&&f&&f(e),e.stopPropagation()}),[v,h]);return e.createElement(i,{className:m(a,"feed-text-content",{"has-click-event":f}),onClick:T},d?e.createElement(n,{className:m("text"),content:L,defaultShortened:!0,lineClamp:5,triggerLess:"show less",triggerMore:"show more",observingEnvs:[k,x,C],onShowMoreLessClick:u?void 0:function(){}}):e.createElement("div",{className:m("text","full-text"),dangerouslySetInnerHTML:{__html:L}}))};export{p as default};
