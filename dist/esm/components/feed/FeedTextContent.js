'use client';
import e,{useMemo as t,useCallback as s}from"react";import o from"../../hooks/useCheckDevice.js";import i from"../editor/WpEditorContents.js";import n from"../ellipsis/Ellipsis.js";import{convertMarkdownToHtmlStr as l}from"../../utils/valueParserUtils.js";import{makeCxFunc as a}from"../../utils/forReactUtils.js";import r from"./FeedTextContent.module.scss.js";import c from"isomorphic-dompurify";const{sanitize:m}=c,p=a(r);var d=a=>{let{className:r,content:c,ellipsis:d,enableShowMore:h,onTextClick:f,onHashTagClick:u,onMentionClick:v}=a;const{isDesktop:g,isMobile:C,isTablet:k}=o(),x=t((()=>m(l(null!=c?c:""),{ADD_ATTR:["target"]})),[c]),L=s((e=>{var t,s;const o=e.target,i=null!==(s=null===(t=o.dataset)||void 0===t?void 0:t.id)&&void 0!==s?s:"",n=o.textContent;o.classList.contains("mention")&&o.classList.contains("complete-mention")?v&&v({id:i,name:n.replace("@","")}):o.classList.contains("hash")&&o.classList.contains("complete-hash")?u&&u({id:i,name:n.replace("#","")}):"A"!==o.tagName&&f&&f(e),e.stopPropagation()}),[v,u]);return e.createElement(i,{className:p(r,"feed-text-content",{"has-click-event":f}),onClick:L},d?e.createElement(n,{className:p("text"),content:x,defaultShortened:!0,lineClamp:5,triggerLess:"show less",triggerMore:"show more",observingEnvs:[C,k,g],onShowMoreLessClick:h?void 0:()=>{}}):e.createElement("div",{className:p("text","full-text"),dangerouslySetInnerHTML:{__html:x}}))};export{d as default};
