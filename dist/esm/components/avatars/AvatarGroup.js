import t from"@babel/runtime/helpers/slicedToArray";import a,{useState as e,useMemo as n,useCallback as r,useEffect as i}from"react";import{makeCxFunc as o}from"../../utils/forReactUtils.js";import c from"./AvatarGroup.module.scss.js";import s from"./Person.js";var l={xsmall:12,small:24,medium:40,large:56,xlarge:72},u=o(c),m=function(o){var c=o.className,m=void 0===c?"":c,v=o.list,d=o.avatarSize,f=void 0===d?"small":d,h=o.avatarCustomSize,p=void 0===h?30:h,g=o.showCnt,x=void 0===g?4:g,S=o.avatarHideRatio,w=void 0===S?.6:S,z=o.rotateDuration,j=void 0===z?5e3:z,b=e([]),E=t(b,2),y=E[0],O=E[1],A="custom"===f?p:l[f],H=n((function(){return(null!=v?v:[]).length>=3&&!!j}),[v,j]),N=n((function(){return v?v.length>x||!H?x:v.length-1:0}),[v,x,H]),C=n((function(){var t=A*w;return{avatarShowSize:t,containerWidth:t*(N-1)+A,containerHeight:A}}),[w,N,A]),G=r((function(){if(w<=0||w>=1)throw new Error("[AvatarGroup] avatarHideRatio는 0보다 크고 1보다 작아야 합니다.");if(x<2)throw new Error("[AvatarGroup] showCnt는 2 이상 이어야 합니다.")}),[w,x]),I=r((function(t){return H?0===t?"translateX(".concat(C.avatarShowSize*N,"px) scale(0)"):"translateX(".concat(C.avatarShowSize*(t-1),"px) scale(").concat(N+1===t?0:1,")"):"translateX(".concat(C.avatarShowSize*t,"px) scale(1)")}),[N,H,C.avatarShowSize]);return i((function(){if(H){var t=setInterval((function(){O((function(t){return t.map((function(a){return Object.assign(Object.assign({},a),{index:0===a.index?t.length-1:a.index-1})}))}))}),j);return function(){clearInterval(t)}}}),[H,j]),i((function(){v&&v.length&&O(v.map((function(t,a){return"string"==typeof t?{src:t,size:A,index:a}:Object.assign(Object.assign({},t),{size:A,index:a})})))}),[v,A,x]),i((function(){G()}),[G]),a.createElement("div",{className:u(m,"multiple-avatars")},a.createElement("div",{className:u("avatars-area"),style:{width:C.containerWidth,height:C.containerHeight}},y.map((function(t,e){return t.index<=x+1?a.createElement("div",{key:"".concat(t,"-").concat(e),className:u("avatar-item"),style:{transform:I(t.index),zIndex:t.index}},a.createElement(s,Object.assign({},t,{customSize:A}))):a.createElement(a.Fragment,null)}))))};export{m as default};
