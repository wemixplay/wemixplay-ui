'use client';
import a,{useState as t,useMemo as e,useCallback as r,useEffect as n}from"react";import{makeCxFunc as s}from"../../utils/forReactUtils.js";import i from"./AvatarGroup.module.scss.js";import o from"./Person.js";const l={xsmall:12,small:24,medium:40,large:56,xlarge:72},c=s(i);var m=s=>{let{className:i="",list:m,avatarSize:h="small",avatarCustomSize:v=30,showCnt:d=4,avatarHideRatio:g=.6,rotateDuration:u=5e3}=s;const[p,x]=t([]),S="custom"===h?v:l[h],w=e((()=>(null!=m?m:[]).length>=3&&!!u),[m,u]),f=e((()=>m?m.length>d||!w?d:m.length-1:0),[m,d,w]),z=e((()=>{const a=S*g;return{avatarShowSize:a,containerWidth:a*(f-1)+S,containerHeight:l[h]}}),[g,f,S]),j=r((()=>{if(g<=0||g>=1)throw new Error("[AvatarGroup] avatarHideRatio는 0보다 크고 1보다 작아야 합니다.");if(d<2)throw new Error("[AvatarGroup] showCnt는 2 이상 이어야 합니다.")}),[g,d]),E=r((a=>w?0===a?"translateX(".concat(z.avatarShowSize*f,"px) scale(0)"):"translateX(".concat(z.avatarShowSize*(a-1),"px) scale(").concat(f+1===a?0:1,")"):"translateX(".concat(z.avatarShowSize*a,"px) scale(1)")),[f,w,z.avatarShowSize]);return n((()=>{if(w){const a=setInterval((()=>{x((a=>a.map((t=>Object.assign(Object.assign({},t),{index:0===t.index?a.length-1:t.index-1})))))}),u);return()=>{clearInterval(a)}}}),[w,u]),n((()=>{m&&m.length&&x(m.map(((a,t)=>"string"==typeof a?{src:a,size:S,index:t}:Object.assign(Object.assign({},a),{size:S,index:t}))))}),[m,S,d]),n((()=>{j()}),[j]),a.createElement("div",{className:c(i,"multiple-avatars")},a.createElement("div",{className:c("avatars-area"),style:{width:z.containerWidth,height:z.containerHeight}},p.map(((t,e)=>t.index<=d+1?a.createElement("div",{key:"".concat(t,"-").concat(e),className:c("avatar-item"),style:{transform:E(t.index),zIndex:t.index}},a.createElement(o,Object.assign({},t,{customSize:S}))):a.createElement(a.Fragment,null)))))};export{m as default};
