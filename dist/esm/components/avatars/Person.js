import e from"@babel/runtime/helpers/slicedToArray";import r,{useRef as a,useState as t,useMemo as i,useCallback as s,useEffect as o}from"react";import l from"./Person.module.scss.js";import n from"../../assets/svgs/ico-king-mark.svg.js";import{makeCxFunc as m}from"../../utils/forReactUtils.js";import{commaWithValue as c}from"../../utils/valueParserUtils.js";var d=m(l),v="/assets/imgs/svgs/default-profile.svg",u=function(l){var m=l.className,u=void 0===m?"":m,f=l.level,g=l.src,p=l.name,E=l.size,h=void 0===E?"medium":E,k=l.customSize,N=l.bedgeElement,b=l.onClick,j=a(),y=t(""),z=e(y,2),C=z[0],P=z[1],U=t(g||v),W=e(U,2),w=W[0],x=W[1],A=i((function(){return!N&&void 0!==f}),[N,f]),L=s((function(){P("loaded")}),[]),R=s((function(){x(v),P("error")}),[]);return o((function(){var e,r,a,t;P((null===(e=j.current)||void 0===e?void 0:e.complete)?(null===(r=j.current)||void 0===r?void 0:r.naturalWidth)?"loaded":"error":"loading"),(null===(a=j.current)||void 0===a?void 0:a.complete)&&!(null===(t=j.current)||void 0===t?void 0:t.naturalWidth)?x(v):x(g||v)}),[g]),r.createElement("div",{className:d(u,"avatar",h,{"no-image":w===v,"has-click-event":b}),style:{width:k,height:k},onClick:b},r.createElement("div",{className:d("avtr-img-area")},r.createElement("div",{className:d("avtr-bedge-area")},A?r.createElement("span",{className:d("avtr-bedge")},f>7&&r.createElement(n,{className:d("king-mark")}),c(f)):N),r.createElement("div",{className:d("avtr-img",C)},r.createElement("img",{ref:j,src:w,alt:p||"user-avatar",onLoad:L,onError:R}))))};export{u as default};
