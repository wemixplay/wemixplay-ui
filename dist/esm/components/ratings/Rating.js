import e from"@babel/runtime/helpers/slicedToArray";import{debounce as a}from"lodash-es";import t,{useState as r,useMemo as s,useCallback as n,useEffect as o}from"react";import{makeCxFunc as m}from"../../utils/forReactUtils.js";import{getFloatFixed as l}from"../../utils/valueParserUtils.js";import i from"../../assets/svgs/ico-star-off.svg.js";import c from"../../assets/svgs/ico-star-on.svg.js";import u from"./Rating.module.scss.js";var v=m(u),d=function(m){var u=m.className,d=void 0===u?"":u,f=m.min,p=void 0===f?0:f,g=m.max,h=void 0===g?5:g,E=m.step,N=void 0===E?.5:E,y=m.size,b=void 0===y?40:y,j=m.gap,x=m.name,C=m.onIcon,I=void 0===C?t.createElement(c,null):C,w=m.offIcon,A=void 0===w?t.createElement(i,null):w,R=m.value,U=m.readOnly,k=m.showScore,z=m.onChange,G=m.handleChange,O=r(0),P=e(O,2),S=P[0],T=P[1],V=s((function(){return a((function(e){var a=e.target,t=a.value,r=a.name,s=Number(t);void 0===R&&T(s),G&&G(s,r),z&&z(e)}),10)}),[R,z,G]),q=n((function(e){var a=100/h,t=S*a,r=(e-1)*a,s=t-r>0?(t-r)/a*100:0;return"".concat(s>100?100:s,"%")}),[h,S]);return o((function(){void 0!==R&&R!==S&&T(R)}),[R,S]),t.createElement("div",{className:v(d,"stars"),style:{height:b}},t.createElement("div",{className:v("star-area"),style:{columnGap:j}},Array.from({length:h}).map((function(e,a){return t.createElement("div",{key:a,className:v("star")},A,t.createElement("span",{className:v("active"),style:{width:q(a+1)}},I))})),t.createElement("input",{type:"range",tabIndex:-1,min:p,max:h,step:N,name:x,defaultValue:S,disabled:U,onChange:V})),k&&t.createElement("div",{className:v("score")},t.createElement("span",{className:v("current")},l(S,1)),t.createElement("span",{className:v("max")},"/",h)))};export{d as default};
