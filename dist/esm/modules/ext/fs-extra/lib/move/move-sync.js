import{g as r}from"../../../graceful-fs/graceful-fs.js";import{c as e}from"../copy/index.js";import{r as t}from"../remove/index.js";import{m as n}from"../mkdirs/index.js";import{s as o}from"../util/stat.js";import s from"path";const i=r,c=s,a=e.copySync,m=t.removeSync,f=n.mkdirpSync,u=o;function p(r,e,t){try{i.renameSync(r,e)}catch(n){if("EXDEV"!==n.code)throw n;return function(r,e,t){const n={overwrite:t,errorOnExist:!0,preserveTimestamps:!0};return a(r,e,n),m(r)}(r,e,t)}}var y=function(r,e,t){const n=(t=t||{}).overwrite||t.clobber||!1,{srcStat:o,isChangingCase:s=!1}=u.checkPathsSync(r,e,"move",t);return u.checkParentPathsSync(r,o,e,"move"),function(r){const e=c.dirname(r);return c.parse(e).root===e}(e)||f(c.dirname(e)),function(r,e,t,n){if(n)return p(r,e,t);if(t)return m(e),p(r,e,t);if(i.existsSync(e))throw new Error("dest already exists.");return p(r,e,t)}(r,e,n,s)};export{y as m};
