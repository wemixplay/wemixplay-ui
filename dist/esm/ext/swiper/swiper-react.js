import e,{forwardRef as r,useState as t,useRef as n,useEffect as s,useLayoutEffect as a,createContext as l}from"react";import{S as i}from"./shared/swiper-core.js";import{g as c,m as o,a as u,u as p}from"./shared/update-on-virtual-data.js";import{d,w as f,n as m,b as w,a as v,e as h,u as E}from"./shared/update-swiper.js";function y(){return y=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},y.apply(this,arguments)}function g(e){return e.type&&e.type.displayName&&e.type.displayName.includes("SwiperSlide")}function b(r){const t=[];return e.Children.toArray(r).forEach((e=>{g(e)?t.push(e):e.props&&e.props.children&&b(e.props.children).forEach((e=>t.push(e)))})),t}function x(r){const t=[],n={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return e.Children.toArray(r).forEach((e=>{if(g(e))t.push(e);else if(e.props&&e.props.slot&&n[e.props.slot])n[e.props.slot].push(e);else if(e.props&&e.props.children){const r=b(e.props.children);r.length>0?r.forEach((e=>t.push(e))):n["container-end"].push(e)}else n["container-end"].push(e)})),{slides:t,slots:n}}function N(e,r){return"undefined"==typeof window?s(e,r):a(e,r)}const O=l(null),S=l(null),j=r((function(r,a){let{className:l,tag:g="div",wrapperTag:b="div",children:O,onSwiper:j,...C}=void 0===r?{}:r,P=!1;const[$,k]=t("swiper"),[z,I]=t(null),[_,A]=t(!1),B=n(!1),T=n(null),F=n(null),H=n(null),L=n(null),U=n(null),V=n(null),q=n(null),D=n(null),{params:G,passedParams:J,rest:K,events:M}=c(C),{slides:Q,slots:R}=x(O),W=()=>{A(!_)};Object.assign(G.on,{_containerClasses(e,r){k(r)}});const X=()=>{Object.assign(G.on,M),P=!0;const e={...G};if(delete e.wrapperClass,F.current=new i(e),F.current.virtual&&F.current.params.virtual.enabled){F.current.virtual.slides=Q;const e={cache:!1,slides:Q,renderExternal:I,renderExternalUpdate:!1};h(F.current.params.virtual,e),h(F.current.originalParams.virtual,e)}};T.current||X(),F.current&&F.current.on("_beforeBreakpoint",W);return s((()=>()=>{F.current&&F.current.off("_beforeBreakpoint",W)})),s((()=>{!B.current&&F.current&&(F.current.emitSlidesClasses(),B.current=!0)})),N((()=>{if(a&&(a.current=T.current),T.current)return F.current.destroyed&&X(),o({el:T.current,nextEl:U.current,prevEl:V.current,paginationEl:q.current,scrollbarEl:D.current,swiper:F.current},G),j&&!F.current.destroyed&&j(F.current),()=>{F.current&&!F.current.destroyed&&F.current.destroy(!0,!1)}}),[]),N((()=>{!P&&M&&F.current&&Object.keys(M).forEach((e=>{F.current.on(e,M[e])}));const e=u(J,H.current,Q,L.current,(e=>e.key));return H.current=J,L.current=Q,e.length&&F.current&&!F.current.destroyed&&E({swiper:F.current,slides:Q,passedParams:J,changedParams:e,nextEl:U.current,prevEl:V.current,scrollbarEl:D.current,paginationEl:q.current}),()=>{M&&F.current&&Object.keys(M).forEach((e=>{F.current.off(e,M[e])}))}})),N((()=>{p(F.current)}),[z]),e.createElement(g,y({ref:T,className:d(`${$}${l?` ${l}`:""}`)},K),e.createElement(S.Provider,{value:F.current},R["container-start"],e.createElement(b,{className:f(G.wrapperClass)},R["wrapper-start"],G.virtual?function(r,t,n){if(!n)return null;const s=e=>{let r=e;return e<0?r=t.length+e:r>=t.length&&(r-=t.length),r},a=r.isHorizontal()?{[r.rtlTranslate?"right":"left"]:`${n.offset}px`}:{top:`${n.offset}px`},{from:l,to:i}=n,c=r.params.loop?-t.length:0,o=r.params.loop?2*t.length:t.length,u=[];for(let e=c;e<o;e+=1)e>=l&&e<=i&&u.push(t[s(e)]);return u.map(((t,n)=>e.cloneElement(t,{swiper:r,style:a,key:t.props.virtualIndex||t.key||`slide-${n}`})))}(F.current,Q,z):Q.map(((r,t)=>e.cloneElement(r,{swiper:F.current,swiperSlideIndex:t}))),R["wrapper-end"]),m(G)&&e.createElement(e.Fragment,null,e.createElement("div",{ref:V,className:"swiper-button-prev"}),e.createElement("div",{ref:U,className:"swiper-button-next"})),w(G)&&e.createElement("div",{ref:D,className:"swiper-scrollbar"}),v(G)&&e.createElement("div",{ref:q,className:"swiper-pagination"}),R["container-end"]))}));j.displayName="Swiper";const C=r((function(r,s){let{tag:a="div",children:l,className:i="",swiper:c,zoom:o,lazy:u,virtualIndex:p,swiperSlideIndex:f,...m}=void 0===r?{}:r;const w=n(null),[v,h]=t("swiper-slide"),[E,g]=t(!1);function b(e,r,t){r===w.current&&h(t)}N((()=>{if(void 0!==f&&(w.current.swiperSlideIndex=f),s&&(s.current=w.current),w.current&&c){if(!c.destroyed)return c.on("_slideClass",b),()=>{c&&c.off("_slideClass",b)};"swiper-slide"!==v&&h("swiper-slide")}})),N((()=>{c&&w.current&&!c.destroyed&&h(c.getSlideClasses(w.current))}),[c]);const x={isActive:v.indexOf("swiper-slide-active")>=0,isVisible:v.indexOf("swiper-slide-visible")>=0,isPrev:v.indexOf("swiper-slide-prev")>=0,isNext:v.indexOf("swiper-slide-next")>=0},S=()=>"function"==typeof l?l(x):l;return e.createElement(a,y({ref:w,className:d(`${v}${i?` ${i}`:""}`),"data-swiper-slide-index":p,onLoad:()=>{g(!0)}},m),o&&e.createElement(O.Provider,{value:x},e.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":"number"==typeof o?o:void 0},S(),u&&!E&&e.createElement("div",{className:"swiper-lazy-preloader"}))),!o&&e.createElement(O.Provider,{value:x},S(),u&&!E&&e.createElement("div",{className:"swiper-lazy-preloader"})))}));C.displayName="SwiperSlide";export{j as Swiper,C as SwiperSlide};
