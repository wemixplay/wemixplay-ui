import{c as a}from"../shared/classes-to-selector.js";import{c as e}from"../shared/create-element-if-not-defined.js";import{m as s,f as l,a as t,h as i}from"../shared/utils.js";function n(n){let{swiper:r,extendParams:o,on:p,emit:c}=n;const d="swiper-pagination";let u;o({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:a=>a,formatFractionTotal:a=>a,bulletClass:`${d}-bullet`,bulletActiveClass:`${d}-bullet-active`,modifierClass:`${d}-`,currentClass:`${d}-current`,totalClass:`${d}-total`,hiddenClass:`${d}-hidden`,progressbarFillClass:`${d}-progressbar-fill`,progressbarOppositeClass:`${d}-progressbar-opposite`,clickableClass:`${d}-clickable`,lockClass:`${d}-lock`,horizontalClass:`${d}-horizontal`,verticalClass:`${d}-vertical`,paginationDisabledClass:`${d}-disabled`}}),r.pagination={el:null,bullets:[]};let g=0;function m(){return!r.params.pagination.el||!r.pagination.el||Array.isArray(r.pagination.el)&&0===r.pagination.el.length}function b(a,e){const{bulletActiveClass:s}=r.params.pagination;a&&(a=a[("prev"===e?"previous":"next")+"ElementSibling"])&&(a.classList.add(`${s}-${e}`),(a=a[("prev"===e?"previous":"next")+"ElementSibling"])&&a.classList.add(`${s}-${e}-${e}`))}function h(e){const s=e.target.closest(a(r.params.pagination.bulletClass));if(!s)return;e.preventDefault();const l=i(s)*r.params.slidesPerGroup;if(r.params.loop){if(r.realIndex===l)return;const a=(t=r.realIndex,n=l,o=r.slides.length,(n%=o)==1+(t%=o)?"next":n===t-1?"previous":void 0);"next"===a?r.slideNext():"previous"===a?r.slidePrev():r.slideToLoop(l)}else r.slideTo(l);var t,n,o}function f(){const e=r.rtl,t=r.params.pagination;if(m())return;let n,o,p=r.pagination.el;p=s(p);const d=r.virtual&&r.params.virtual.enabled?r.virtual.slides.length:r.slides.length,h=r.params.loop?Math.ceil(d/r.params.slidesPerGroup):r.snapGrid.length;if(r.params.loop?(o=r.previousRealIndex||0,n=r.params.slidesPerGroup>1?Math.floor(r.realIndex/r.params.slidesPerGroup):r.realIndex):void 0!==r.snapIndex?(n=r.snapIndex,o=r.previousSnapIndex):(o=r.previousIndex||0,n=r.activeIndex||0),"bullets"===t.type&&r.pagination.bullets&&r.pagination.bullets.length>0){const a=r.pagination.bullets;let s,c,d;if(t.dynamicBullets&&(u=l(a[0],r.isHorizontal()?"width":"height"),p.forEach((a=>{a.style[r.isHorizontal()?"width":"height"]=u*(t.dynamicMainBullets+4)+"px"})),t.dynamicMainBullets>1&&void 0!==o&&(g+=n-(o||0),g>t.dynamicMainBullets-1?g=t.dynamicMainBullets-1:g<0&&(g=0)),s=Math.max(n-g,0),c=s+(Math.min(a.length,t.dynamicMainBullets)-1),d=(c+s)/2),a.forEach((a=>{const e=[...["","-next","-next-next","-prev","-prev-prev","-main"].map((a=>`${t.bulletActiveClass}${a}`))].map((a=>"string"==typeof a&&a.includes(" ")?a.split(" "):a)).flat();a.classList.remove(...e)})),p.length>1)a.forEach((a=>{const e=i(a);e===n?a.classList.add(...t.bulletActiveClass.split(" ")):r.isElement&&a.setAttribute("part","bullet"),t.dynamicBullets&&(e>=s&&e<=c&&a.classList.add(...`${t.bulletActiveClass}-main`.split(" ")),e===s&&b(a,"prev"),e===c&&b(a,"next"))}));else{const e=a[n];if(e&&e.classList.add(...t.bulletActiveClass.split(" ")),r.isElement&&a.forEach(((a,e)=>{a.setAttribute("part",e===n?"bullet-active":"bullet")})),t.dynamicBullets){const e=a[s],l=a[c];for(let e=s;e<=c;e+=1)a[e]&&a[e].classList.add(...`${t.bulletActiveClass}-main`.split(" "));b(e,"prev"),b(l,"next")}}if(t.dynamicBullets){const s=Math.min(a.length,t.dynamicMainBullets+4),l=(u*s-u)/2-d*u,i=e?"right":"left";a.forEach((a=>{a.style[r.isHorizontal()?i:"top"]=`${l}px`}))}}p.forEach(((e,s)=>{if("fraction"===t.type&&(e.querySelectorAll(a(t.currentClass)).forEach((a=>{a.textContent=t.formatFractionCurrent(n+1)})),e.querySelectorAll(a(t.totalClass)).forEach((a=>{a.textContent=t.formatFractionTotal(h)}))),"progressbar"===t.type){let s;s=t.progressbarOpposite?r.isHorizontal()?"vertical":"horizontal":r.isHorizontal()?"horizontal":"vertical";const l=(n+1)/h;let i=1,o=1;"horizontal"===s?i=l:o=l,e.querySelectorAll(a(t.progressbarFillClass)).forEach((a=>{a.style.transform=`translate3d(0,0,0) scaleX(${i}) scaleY(${o})`,a.style.transitionDuration=`${r.params.speed}ms`}))}"custom"===t.type&&t.renderCustom?(e.innerHTML=t.renderCustom(r,n+1,h),0===s&&c("paginationRender",e)):(0===s&&c("paginationRender",e),c("paginationUpdate",e)),r.params.watchOverflow&&r.enabled&&e.classList[r.isLocked?"add":"remove"](t.lockClass)}))}function v(){const e=r.params.pagination;if(m())return;const l=r.virtual&&r.params.virtual.enabled?r.virtual.slides.length:r.grid&&r.params.grid.rows>1?r.slides.length/Math.ceil(r.params.grid.rows):r.slides.length;let t=r.pagination.el;t=s(t);let i="";if("bullets"===e.type){let a=r.params.loop?Math.ceil(l/r.params.slidesPerGroup):r.snapGrid.length;r.params.freeMode&&r.params.freeMode.enabled&&a>l&&(a=l);for(let s=0;s<a;s+=1)e.renderBullet?i+=e.renderBullet.call(r,s,e.bulletClass):i+=`<${e.bulletElement} ${r.isElement?'part="bullet"':""} class="${e.bulletClass}"></${e.bulletElement}>`}"fraction"===e.type&&(i=e.renderFraction?e.renderFraction.call(r,e.currentClass,e.totalClass):`<span class="${e.currentClass}"></span> / <span class="${e.totalClass}"></span>`),"progressbar"===e.type&&(i=e.renderProgressbar?e.renderProgressbar.call(r,e.progressbarFillClass):`<span class="${e.progressbarFillClass}"></span>`),r.pagination.bullets=[],t.forEach((s=>{"custom"!==e.type&&(s.innerHTML=i||""),"bullets"===e.type&&r.pagination.bullets.push(...s.querySelectorAll(a(e.bulletClass)))})),"custom"!==e.type&&c("paginationRender",t[0])}function C(){r.params.pagination=e(r,r.originalParams.pagination,r.params.pagination,{el:"swiper-pagination"});const a=r.params.pagination;if(!a.el)return;let l;"string"==typeof a.el&&r.isElement&&(l=r.el.querySelector(a.el)),l||"string"!=typeof a.el||(l=[...document.querySelectorAll(a.el)]),l||(l=a.el),l&&0!==l.length&&(r.params.uniqueNavElements&&"string"==typeof a.el&&Array.isArray(l)&&l.length>1&&(l=[...r.el.querySelectorAll(a.el)],l.length>1&&(l=l.filter((a=>t(a,".swiper")[0]===r.el))[0])),Array.isArray(l)&&1===l.length&&(l=l[0]),Object.assign(r.pagination,{el:l}),l=s(l),l.forEach((e=>{"bullets"===a.type&&a.clickable&&e.classList.add(...(a.clickableClass||"").split(" ")),e.classList.add(a.modifierClass+a.type),e.classList.add(r.isHorizontal()?a.horizontalClass:a.verticalClass),"bullets"===a.type&&a.dynamicBullets&&(e.classList.add(`${a.modifierClass}${a.type}-dynamic`),g=0,a.dynamicMainBullets<1&&(a.dynamicMainBullets=1)),"progressbar"===a.type&&a.progressbarOpposite&&e.classList.add(a.progressbarOppositeClass),a.clickable&&e.addEventListener("click",h),r.enabled||e.classList.add(a.lockClass)})))}function y(){const a=r.params.pagination;if(m())return;let e=r.pagination.el;e&&(e=s(e),e.forEach((e=>{e.classList.remove(a.hiddenClass),e.classList.remove(a.modifierClass+a.type),e.classList.remove(r.isHorizontal()?a.horizontalClass:a.verticalClass),a.clickable&&(e.classList.remove(...(a.clickableClass||"").split(" ")),e.removeEventListener("click",h))}))),r.pagination.bullets&&r.pagination.bullets.forEach((e=>e.classList.remove(...a.bulletActiveClass.split(" "))))}p("changeDirection",(()=>{if(!r.pagination||!r.pagination.el)return;const a=r.params.pagination;let{el:e}=r.pagination;e=s(e),e.forEach((e=>{e.classList.remove(a.horizontalClass,a.verticalClass),e.classList.add(r.isHorizontal()?a.horizontalClass:a.verticalClass)}))})),p("init",(()=>{!1===r.params.pagination.enabled?L():(C(),v(),f())})),p("activeIndexChange",(()=>{void 0===r.snapIndex&&f()})),p("snapIndexChange",(()=>{f()})),p("snapGridLengthChange",(()=>{v(),f()})),p("destroy",(()=>{y()})),p("enable disable",(()=>{let{el:a}=r.pagination;a&&(a=s(a),a.forEach((a=>a.classList[r.enabled?"remove":"add"](r.params.pagination.lockClass))))})),p("lock unlock",(()=>{f()})),p("click",((a,e)=>{const l=e.target,t=s(r.pagination.el);if(r.params.pagination.el&&r.params.pagination.hideOnClick&&t&&t.length>0&&!l.classList.contains(r.params.pagination.bulletClass)){if(r.navigation&&(r.navigation.nextEl&&l===r.navigation.nextEl||r.navigation.prevEl&&l===r.navigation.prevEl))return;const a=t[0].classList.contains(r.params.pagination.hiddenClass);c(!0===a?"paginationShow":"paginationHide"),t.forEach((a=>a.classList.toggle(r.params.pagination.hiddenClass)))}}));const L=()=>{r.el.classList.add(r.params.pagination.paginationDisabledClass);let{el:a}=r.pagination;a&&(a=s(a),a.forEach((a=>a.classList.add(r.params.pagination.paginationDisabledClass)))),y()};Object.assign(r.pagination,{enable:()=>{r.el.classList.remove(r.params.pagination.paginationDisabledClass);let{el:a}=r.pagination;a&&(a=s(a),a.forEach((a=>a.classList.remove(r.params.pagination.paginationDisabledClass)))),C(),v(),f()},disable:L,render:v,update:f,init:C,destroy:y})}export{n as default};
