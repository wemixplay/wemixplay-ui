import r from"@babel/runtime/regenerator";import{__awaiter as e}from"../_virtual/_tslib.js";import t from"../_virtual/get.js";var n=function(t){return new Promise((function(n,o){var a=new FileReader;a.onload=function(){return e(void 0,void 0,void 0,r.mark((function e(){var t;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:"string"==typeof a.result?n(a.result):(t=new TextDecoder,n(t.decode(a.result)));case 1:case"end":return r.stop()}}),e)})))},a.onerror=o,a.readAsDataURL(t)}))},o=function(r,e){return new Promise((function(t,n){/\.(jpg|jpeg|png|gif|webp)$/i.test(r.name)?t(!0):(e&&(e.target.value=""),n(new Error("onlyImage")))}))},a=function(a){return e(void 0,void 0,void 0,r.mark((function e(){var i,u;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(i=t(a,"target.files[0]",null))){r.next=8;break}return r.next=4,o(i,a);case 4:return r.next=6,n(i);case 6:return u=r.sent,r.abrupt("return",{file:i,dataUrl:u||""});case 8:throw new Error("uploadFailed");case 9:case"end":return r.stop()}}),e)})))};export{a as imageFileUpload,n as readAsDataURLAsync};
