import e from"@babel/runtime/regenerator";import{__awaiter as r}from"../_virtual/_tslib.js";import t from'./../ext/lodash/get.js';var n=function(t){return new Promise((function(n,o){var a=new FileReader;a.onload=function(){return r(void 0,void 0,void 0,e.mark((function r(){var t;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"string"==typeof a.result?n(a.result):(t=new TextDecoder,n(t.decode(a.result)));case 1:case"end":return e.stop()}}),r)})))},a.onerror=o,a.readAsDataURL(t)}))},o=function(e,r){return new Promise((function(t,n){/\.(jpg|jpeg|png|gif|webp)$/i.test(e.name)?t(!0):(r&&(r.target.value=""),n(new Error("onlyImage")))}))},a=function(a){return r(void 0,void 0,void 0,e.mark((function r(){var i,u;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=t(a,"target.files[0]",null))){e.next=8;break}return e.next=4,o(i,a);case 4:return e.next=6,n(i);case 6:return u=e.sent,e.abrupt("return",{file:i,dataUrl:u||""});case 8:throw new Error("uploadFailed");case 9:case"end":return e.stop()}}),r)})))};export{a as imageFileUpload,n as readAsDataURLAsync};
