import{__awaiter as e}from"../_virtual/_tslib.js";import o from'./../ext/lodash/get.js';const r=o=>new Promise(((r,t)=>{const i=new FileReader;i.onload=()=>e(void 0,void 0,void 0,(function*(){if("string"==typeof i.result)r(i.result);else{const e=new TextDecoder;r(e.decode(i.result))}})),i.onerror=t,i.readAsDataURL(o)})),t=t=>e(void 0,void 0,void 0,(function*(){const e=o(t,"target.files[0]",null);if(e){yield((e,o)=>new Promise(((r,t)=>{/\.(jpg|jpeg|png|gif|webp)$/i.test(e.name)?r(!0):(o&&(o.target.value=""),t(new Error("onlyImage")))})))(e,t);return{file:e,dataUrl:(yield r(e))||""}}throw new Error("uploadFailed")}));export{t as imageFileUpload,r as readAsDataURLAsync};
