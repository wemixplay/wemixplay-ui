"use strict";var e=require("@babel/runtime/helpers/toConsumableArray"),n=require("@babel/runtime/helpers/slicedToArray"),i=require("../../_virtual/_tslib.js"),t=require("react"),o=require('./../../ext/swiper/swiper-react.js'),a=require("../../utils/forReactUtils.js"),l=require("./Carousel.module.scss.js"),r=require("../../assets/svgs/ico-carousel-next.svg.js"),s=require("../../assets/svgs/ico-carousel-prev.svg.js"),u=require('./../../ext/swiper/modules/navigation.js'),d=require('./../../ext/swiper/modules/pagination.js'),c=require('./../../ext/swiper/modules/free-mode.js'),p=require('./../../ext/swiper/modules/effect-fade.js'),v=a.makeCxFunc(l);module.exports=function(a){var l=a.className,m=a.isLoading,g=void 0!==m&&m,f=a.skeletonCount,h=void 0===f?3:f,w=a.skeletonElement,S=void 0===w?null:w,b=a.children,E=a.modules,C=void 0===E?[]:E,k=a.effect,j=void 0===k?"slide":k,x=a.spaceBetween,q=void 0===x?10:x,y=a.breakpoints,B=a.slidesPerView,N=void 0===B?1:B,M=a.threshold,T=void 0===M?5:M,_=a.longSwipesMs,O=void 0===_?1e3:_,P=a.initialSlide,I=void 0===P?0:P,U=a.speed,A=void 0===U?1e3:U,R=a.loop,V=void 0===R||R,L=a.autoplay,F=void 0!==L&&L,z=a.allowTouchMove,D=void 0===z||z,G=a.navigation,H=void 0!==G&&G,J=a.pagination,K=void 0!==J&&J,Q=a.prevButton,W=void 0===Q?t.createElement(s,null):Q,X=a.nextButton,Y=void 0===X?t.createElement(r,null):X,Z=a.onSlideChangeTransitionEnd,$=a.handleOnSlideChangeTransitionEnd,ee=a.onSlideChange,ne=a.onSwiper,ie=a.onUpdate,te=a.onPrevButtonClick,oe=a.onNextButtonClick,ae=i.__rest(a,["className","isLoading","skeletonCount","skeletonElement","children","modules","effect","spaceBetween","breakpoints","slidesPerView","threshold","longSwipesMs","initialSlide","speed","loop","autoplay","allowTouchMove","navigation","pagination","prevButton","nextButton","onSlideChangeTransitionEnd","handleOnSlideChangeTransitionEnd","onSlideChange","onSwiper","onUpdate","onPrevButtonClick","onNextButtonClick"]),le=t.useRef(),re=t.useRef(null),se=t.useState(),ue=n(se,2),de=ue[0],ce=ue[1],pe=t.useState(),ve=n(pe,2),me=ve[0],ge=ve[1],fe=t.useMemo((function(){return g?Array.from({length:h},(function(e,n){return t.createElement(o.SwiperSlide,{key:"slide-item-".concat(n)},S)})):t.Children.map(b,(function(e){return e})).map((function(e,n){return t.createElement(o.SwiperSlide,{key:"slide-item-".concat(n)},e)}))}),[g,b,h,S]),he=t.useMemo((function(){return String(Math.random()).replace(".","")}),[]),we=t.useCallback((function(e){var n=("auto"===N?1:N)-1;return 0===e?"first":e===fe.length-1-n?"last":"middle"}),[N,fe]),Se=t.useCallback((function(e){le.current=e,ne&&ne(e)}),[ne]);return t.useEffect((function(){le.current&&H&&(le.current.navigation.prevEl=de,le.current.navigation.nextEl=me)}),[H,me,de]),t.createElement("div",{className:v("carousel-wrapper",l)},t.createElement("div",{className:v("carousel-swiper")},t.createElement(o.Swiper,Object.assign({modules:[u,d,c,p].concat(e(C)),effect:j,slidesPerView:N,initialSlide:I,speed:A,threshold:T,longSwipesMs:O,loop:V,autoplay:F,allowTouchMove:D,breakpoints:y,spaceBetween:q,onSlideChangeTransitionEnd:function(e){null==Z||Z(e);var n=e.realIndex,i=e.activeIndex,t=e.previousIndex,o=we(n);null==$||$({realIndex:n,position:o,direction:i-t>0?"next":"prev"})},onSlideChange:ee,onSwiper:Se,onUpdate:ie,navigation:!!H&&Object.assign({prevEl:de,nextEl:me},"boolean"==typeof H?{}:H),pagination:!!K&&Object.assign({clickable:!0,el:"#pagination-".concat(he)},"boolean"==typeof K?{}:K)},ae,{style:Object.assign(Object.assign({},ae.style),{width:"auto"===N?"auto":""})}),fe)),H&&t.createElement("div",{className:v("carousel-navigation")},t.createElement("button",{ref:ce,className:v("nav-prev-btn"),onClick:te},W),t.createElement("button",{ref:ge,className:v("nav-next-btn"),onClick:oe},Y)),K&&t.createElement("div",{ref:re,id:"pagination-".concat(he),className:v("carousel-pagination")}))};
