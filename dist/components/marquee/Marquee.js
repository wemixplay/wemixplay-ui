"use strict";var e=require("@babel/runtime/helpers/toConsumableArray"),t=require("@babel/runtime/helpers/slicedToArray"),n=require("react"),r=require("../../utils/forReactUtils.js"),a=require("./Marquee.module.scss.js");"undefined"==typeof window&&(n.useLayoutEffect=n.useEffect);var i=r.makeCxFunc(a),u=function(e,n){var r=function(e){var n=getComputedStyle(e).margin.replaceAll("px","").split(" ").map(Number).reduce((function(e,t,n){return n%2==0?[e[0]+t,e[1]]:[e[0],e[1]+t]}),[0,0]),r=t(n,2);return{marqueeItemMarginBlock:r[0],marqueeItemMarginInline:r[1]}}(n),a=r.marqueeItemMarginBlock,i=r.marqueeItemMarginInline,u=n.offsetWidth,m=n.offsetHeight;return{marqueeItemSize:e?u:m,marqueeItemMargin:e?i:a}},m=function(e){var t=e.totalSize,n=e.containerSize,r=e.elementLength;return Math.ceil(n/t)*r},o=function(r){var a=r.className,o=r.direction,s=void 0===o?"left":o,c=r.children,l=r.list,f=r.off,d=void 0!==f&&f,p=r.pauseOnMouseEnter,g=void 0!==p&&p,q=r.minimalAuto,v=void 0!==q&&q,S=r.minimalCount,h=void 0===S?0:S,y=r.animationIterationCount,I=void 0===y?"infinite":y,b=r.animationDuration,M=r.animationDelay,z=r.spaceBetween,E=r.onStart,A=r.onIteration,C=r.onFinish,N=n.useRef(null),k=n.useState(h),w=t(k,2),j=w[0],x=w[1],B=n.useMemo((function(){return n.Children.map(c,(function(e,t){return n.createElement("span",{key:t,className:i("marquee-item")},e)}))||l.map((function(e,t){return n.createElement("span",{key:t,className:i("marquee-item")},e)}))}),[c,l]),D=n.useMemo((function(){for(var t=e(B);j>t.length;)t=[].concat(e(t),e(B));return[].concat(e(t),e(t)).map((function(e,t){return Object.assign(Object.assign({},e),{key:t})}))}),[B,j]);return n.useLayoutEffect((function(){if(v&&N.current){var e=N.current,t=Array.from(e.getElementsByClassName("marquee-item")).slice(0,B.length),n=null==t?void 0:t.length;if(n){var r="left"===s||"right"===s,a=t.reduce((function(e,t){var n=e.sizeSum,a=e.marginSum,i=u(r,t);return{sizeSum:n+i.marqueeItemSize,marginSum:a+i.marqueeItemMargin}}),{sizeSum:0,marginSum:0}),i=a.sizeSum,o=a.marginSum,c=m({totalSize:"number"==typeof z?i+z*n:i+o,containerSize:e[r?"offsetWidth":"offsetHeight"],elementLength:n});x(c)}}}),[v,s,z,B]),n.createElement("div",{ref:N,className:i("marquee-wrapper",{paused:g},a)},n.createElement("div",{className:i("marquee-content",s,{off:d,"space-between":"number"==typeof z}),style:{animationDuration:b,animationDelay:M,animationIterationCount:I,"--space-between":"".concat(z,"px")},onAnimationStart:E,onAnimationIteration:A,onAnimationEnd:C},D))};module.exports=o;
