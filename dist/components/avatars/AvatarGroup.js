"use strict";var e=require("react"),a=require("../../utils/forReactUtils.js"),t=require("./AvatarGroup.module.scss.js"),r=require("./Person.js");const s={xsmall:12,small:24,medium:40,large:56,xlarge:72},n=a.makeCxFunc(t);var i=a=>{let{className:t="",list:i,avatarSize:c="small",avatarCustomSize:l=30,showCnt:o=4,avatarHideRatio:u=.6,rotateDuration:m=5e3}=a;const[v,h]=e.useState([]),d="custom"===c?l:s[c],g=e.useMemo((()=>(null!=i?i:[]).length>=3&&!!m),[i,m]),x=e.useMemo((()=>i?i.length>o||!g?o:i.length-1:0),[i,o,g]),S=e.useMemo((()=>{const e=d*u;return{avatarShowSize:e,containerWidth:e*(x-1)+d,containerHeight:s[c]}}),[u,x,d]),f=e.useCallback((()=>{if(u<=0||u>=1)throw new Error("[AvatarGroup] avatarHideRatio는 0보다 크고 1보다 작아야 합니다.");if(o<2)throw new Error("[AvatarGroup] showCnt는 2 이상 이어야 합니다.")}),[u,o]),p=e.useCallback((e=>g?0===e?"translateX(".concat(S.avatarShowSize*x,"px) scale(0)"):"translateX(".concat(S.avatarShowSize*(e-1),"px) scale(").concat(x+1===e?0:1,")"):"translateX(".concat(S.avatarShowSize*e,"px) scale(1)")),[x,g,S.avatarShowSize]);return e.useEffect((()=>{if(g){const e=setInterval((()=>{h((e=>e.map((a=>Object.assign(Object.assign({},a),{index:0===a.index?e.length-1:a.index-1})))))}),m);return()=>{clearInterval(e)}}}),[g,m]),e.useEffect((()=>{i&&i.length&&h(i.map(((e,a)=>"string"==typeof e?{src:e,size:d,index:a}:Object.assign(Object.assign({},e),{size:d,index:a}))))}),[i,d,o]),e.useEffect((()=>{f()}),[f]),e.createElement("div",{className:n(t,"multiple-avatars")},e.createElement("div",{className:n("avatars-area"),style:{width:S.containerWidth,height:S.containerHeight}},v.map(((a,t)=>a.index<=o+1?e.createElement("div",{key:"".concat(a,"-").concat(t),className:n("avatar-item"),style:{transform:p(a.index),zIndex:a.index}},e.createElement(r,Object.assign({},a,{customSize:d}))):e.createElement(e.Fragment,null)))))};module.exports=i;
