"use client";
"use strict";var e=require("react"),t=require("../../../utils/forReactUtils.js"),r=require("../../../utils/valueParserUtils.js"),a=require("./MultiRangeInput.module.scss.js");const n=t.makeCxFunc(a),l=e.forwardRef(((t,a)=>{const{className:l="",value:u,name:c,min:s,max:i,step:o=1,thumbSize:m=26,sliderHeight:d=6,thumbBorderColor:h,thumbColor:p,trackColor:f,rangeColor:v,showTextInput:g=!0,handleChange:b,onChange:E}=t,x=e.useRef([s,i]),y=e.useRef(null),C=e.useRef(null),N=e.useRef(null),M=e.useRef(null),[k,R]=e.useState([s,i]),w=e.useMemo((()=>k.map((e=>(e-s)/(i-s)*100))),[k,s,i]),I=e.useCallback((()=>{N.current&&M.current&&(N.current.value=r.commaWithValue(k[0]),M.current.value=r.commaWithValue(k[1]),N.current.style.width="".concat(N.current.scrollWidth,"px"),M.current.style.width="".concat(M.current.scrollWidth,"px"))}),[k]),V=e.useCallback((e=>{"Enter"!==e.key||e.nativeEvent.isComposing||(N.current.blur(),M.current.blur())}),[]),W=e.useCallback((function(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(g&&(!N.current||!M.current))return;const{value:n}=t.target;if("left"===e){let e=Math.min(r.commaStrToNumber(n),k[1]-o);e=e>s?e:s,R([e,k[1]]),a&&b&&b([e,k[1]],c),N.current.value=r.commaWithValue(e)}else{let e=Math.max(r.commaStrToNumber(n),k[0]+o);e=e<=i?e:i,R([k[0],e]),a&&b&&b([k[0],e],c),M.current.value=r.commaWithValue(e)}E&&E(t),I()}),[E,g,I,b,c,k,o,s,i]),T=e.useCallback((()=>{k.some(((e,t)=>e!==x.current[t]))&&(x.current=[...k],b&&b(k,c))}),[k,c,b]);return e.useEffect((()=>{I()}),[I]),e.useEffect((()=>{void 0!==u&&(R(u),x.current=[...u])}),[u]),e.useImperativeHandle(a,(()=>({focus:y.current.focus}))),e.createElement("div",{className:n("range-input",l,{disabled:s===i}),style:{"--mri-thumb-size":"".concat(m,"px"),"--mri-slider-height":"".concat(d,"px"),"--mri-thumb-border-color":h,"--mri-thumb-color":p,"--mri-track-color":f,"--mri-range-color":v}},e.createElement("div",{className:n("range-area")},e.createElement("div",null,e.createElement("input",{ref:y,type:"range",value:k[0],min:s,max:i,step:o,onChange:e=>W("left",e),onMouseUp:T,onMouseLeave:T,onTouchEnd:T}),e.createElement("input",{ref:C,type:"range",value:k[1],id:"input-right",min:s,max:i,step:o,onChange:e=>W("right",e),onMouseUp:T,onMouseLeave:T,onTouchEnd:T}),e.createElement("div",{className:n("slider")},e.createElement("div",{className:n("track")}),e.createElement("div",{className:n("range"),style:{left:"".concat(w[0],"%"),right:"".concat(100-w[1],"%")}}),e.createElement("div",{className:n("thumb","left"),style:{left:"".concat(w[0],"%")}}),e.createElement("div",{className:n("thumb","right"),style:{right:"".concat(100-w[1],"%")}})))),g&&e.createElement("div",{className:n("range-input")},e.createElement("div",{className:n("input-box")},e.createElement("label",{htmlFor:"rangeMinInput"},"min"),e.createElement("input",{ref:N,type:"text",inputMode:"numeric",defaultValue:k[0],disabled:s===i,onBlur:e=>W("left",e,!0),onKeyDown:V})),e.createElement("div",{className:n("input-box")},e.createElement("label",{htmlFor:"rangeMaxInput"},"max"),e.createElement("input",{ref:M,type:"text",inputMode:"numeric",defaultValue:k[1],disabled:s===i,onBlur:e=>W("right",e,!0),onKeyDown:V}))))}));l.displayName="MultiRangeInput";var u=l;module.exports=u;
