"use strict";var e=require("@babel/runtime/helpers/toConsumableArray"),r=require("react"),n=require("./CheckBox.module.scss.js"),a=require("../../../assets/svgs/ico-check.svg.js"),t=require("../../../assets/svgs/ico-indeterminate.svg.js"),c=require("../../../utils/forReactUtils.js"),l=require("../../../_virtual/uniq.js"),s=c.makeCxFunc(n),u=r.forwardRef((function(n,c){var u=n.className,i=void 0===u?"":u,o=n.name,d=n.size,m=void 0===d?"normal":d,y=n.checkValue,f=void 0===y||y,h=n.unCheckValue,v=void 0!==h&&h,A=n.value,g=n.children,k=n.disabled,p=n.readOnly,b=n.onChange,E=n.onBlur,q=n.onFocus,C=n.handleChange,x=r.useRef(null),N=r.useId(),w=r.useMemo((function(){if(void 0!==A)return Array.isArray(f)&&Array.isArray(A)?A.length===f.length&&A.every((function(e){return f.includes(e)})):Array.isArray(A)?A.includes(f):A===f}),[A,f]),B=r.useMemo((function(){return!w&&(!(!Array.isArray(f)||!Array.isArray(A))&&(A.length!==f.length&&A.some((function(e){return f.includes(e)}))))}),[w,f,A]),j=r.useCallback((function(r){var n=r.target,a=n.name,t=n.checked,c='input[name="'.concat(a,'"]'),s=document.querySelectorAll(c);if(Array.isArray(f)&&Array.isArray(A))C&&C(A.length>0?[]:f,a);else{if(s.length>1||Array.isArray(A)){for(var u=document.querySelectorAll("".concat(c,":checked")),i=[],o=f,d=A?e(A):void 0,m=function(){var e="number"==typeof f?Number(u[y].value):u[y].value;-1===i.findIndex((function(r){return r===e}))&&i.push(e)},y=0;y<u.length;y+=1)m();d&&void 0!==o&&d.push(o),i=d?d.filter((function(e){return i.includes(e)})):l(i),C&&C(i,a)}else C&&C(t?f:v,a);b&&b(r)}}),[A,v,C,b,f]);return r.useEffect((function(){var e='input[name="'.concat(o||N,'"]');if(document.querySelectorAll(e).length>1||Array.isArray(A)){if("boolean"==typeof f)throw new Error("여러개의 동일한 name 값을 갖거나 data가 배열로 전달된 CheckBox는 boolean타입의 value를 받을 수 없습니다.")}else if(Array.isArray(A))throw new Error("단일의 name 값을 갖는 CheckBox는 배열 타입의 data를 가질 수 없습니다.")}),[A,o,N,f]),r.useEffect((function(){x.current&&(x.current.indeterminate=B)}),[B]),r.useImperativeHandle(c,(function(){return x.current})),r.createElement("div",{className:s(i,"checkbox",m,{readonly:p,disabled:k,"not-allow":p||k})},r.createElement("label",null,r.createElement("input",{ref:x,type:"checkbox",name:Array.isArray(f)?N:o||N,value:String(f),checked:w,readOnly:p,disabled:k,onBlur:E,onFocus:q,onChange:j}),r.createElement("span",{className:s("ico-check")},r.createElement("i",{className:s("icon")},B?r.createElement(t,{className:s("partial")}):r.createElement(a,{className:s("check")}))),r.createElement("span",{className:s("text")},g)))}));u.displayName="CheckBox",module.exports=u;
