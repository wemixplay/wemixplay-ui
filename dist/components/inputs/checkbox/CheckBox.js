'use client';
"use strict";var e=require("react"),r=require("./CheckBox.module.scss.js"),a=require("../../../assets/svgs/ico-check.svg.js"),n=require("../../../assets/svgs/ico-indeterminate.svg.js"),s=require("../../../utils/forReactUtils.js"),l=require('./../../../ext/lodash/uniq.js');const t=s.makeCxFunc(r),c=e.forwardRef(((r,s)=>{const{className:c="",name:o,size:i="normal",checkValue:u=!0,unCheckValue:d=!1,value:m,children:y,disabled:h,readOnly:A,onChange:f,onBlur:g,onFocus:v,handleChange:k}=r,p=e.useRef(null),E=e.useId(),b=e.useMemo((()=>{if(void 0!==m)return Array.isArray(u)&&Array.isArray(m)?m.length===u.length&&m.every((e=>u.includes(e))):Array.isArray(m)?m.includes(u):m===u}),[m,u]),q=e.useMemo((()=>!b&&(!(!Array.isArray(u)||!Array.isArray(m))&&(m.length!==u.length&&m.some((e=>u.includes(e)))))),[b,u,m]),x=e.useCallback((e=>{const{name:r,checked:a}=e.target,n='input[name="'.concat(r,'"]'),s=document.querySelectorAll(n);if(Array.isArray(u)&&Array.isArray(m))k&&k(m.length>0?[]:u,r);else{if(s.length>1||Array.isArray(m)){const e=document.querySelectorAll("".concat(n,":checked"));let a=[];const s=u,t=m?[...m]:void 0;for(let r=0;r<e.length;r+=1){const n="number"==typeof u?Number(e[r].value):e[r].value;-1===a.findIndex((e=>e===n))&&a.push(n)}t&&void 0!==s&&t.push(s),a=t?t.filter((e=>a.includes(e))):l(a),k&&k(a,r)}else k&&k(a?u:d,r);f&&f(e)}}),[m,d,k,f,u]);return e.useEffect((()=>{const e='input[name="'.concat(o||E,'"]');if(document.querySelectorAll(e).length>1||Array.isArray(m)){if("boolean"==typeof u)throw new Error("여러개의 동일한 name 값을 갖거나 data가 배열로 전달된 CheckBox는 boolean타입의 value를 받을 수 없습니다.")}else if(Array.isArray(m))throw new Error("단일의 name 값을 갖는 CheckBox는 배열 타입의 data를 가질 수 없습니다.")}),[m,o,E,u]),e.useEffect((()=>{p.current&&(p.current.indeterminate=q)}),[q]),e.useImperativeHandle(s,(()=>p.current)),e.createElement("div",{className:t(c,"checkbox",i,{readonly:A,disabled:h,"not-allow":A||h})},e.createElement("label",null,e.createElement("input",{ref:p,type:"checkbox",name:Array.isArray(u)?E:o||E,value:String(u),checked:b,readOnly:A,disabled:h,onBlur:g,onFocus:v,onChange:x}),e.createElement("span",{className:t("ico-check")},e.createElement("i",{className:t("icon")},q?e.createElement(n,{className:t("partial")}):e.createElement(a,{className:t("check")}))),e.createElement("span",{className:t("text")},y)))}));c.displayName="CheckBox";var o=c;module.exports=o;
