"use strict";var e=require("@babel/runtime/helpers/slicedToArray"),r=require("../../../_virtual/_tslib.js"),a=require("react"),t=require("../../../utils/forReactUtils.js"),n=require("../../../utils/valueParserUtils.js"),u=require("./TextArea.module.scss.js"),l=t.makeCxFunc(u),s=a.forwardRef((function(t,u){var s=t.className,c=void 0===s?"":s,i=t.maxLength,o=t.error,m=t.handleChange,v=r.__rest(t,["className","value","maxLength","error","info","handleChange"]),h=a.useRef(),f=a.useState(0),g=e(f,2),d=g[0],x=g[1],b=a.useCallback((function(e){var r=e.target,a=r.value,t=r.name;m&&m(a,t),v.onChange&&v.onChange(e),x(a.length)}),[m,v]);return a.useEffect((function(){var e;h.current&&x((null!==(e=h.current.value)&&void 0!==e?e:"").length)}),[]),a.useEffect((function(){h.current&&h.current.value.length>i&&(h.current.value=h.current.value.slice(0,i),dispatchEvent(new Event("change",{bubbles:!0})))}),[i]),a.useImperativeHandle(u,(function(){return h.current})),a.createElement("div",{className:l(c,"text-area",{error:o})},a.createElement("textarea",Object.assign({ref:h},v,{maxLength:i,onChange:b})),!!i&&a.createElement("p",{className:l("text-count")},a.createElement("strong",null,n.commaWithValue(d)),"/",n.commaWithValue(i)))}));s.displayName="TextArea";var c=s;module.exports=c;
