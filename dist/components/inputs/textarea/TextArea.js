"use strict";var e=require("@babel/runtime/helpers/slicedToArray"),r=require("../../../_virtual/_tslib.js"),t=require("react"),a=require("../../../utils/forReactUtils.js"),n=require("../../../utils/valueParserUtils.js"),u=require("./TextArea.module.scss.js"),l=a.makeCxFunc(u),s=t.forwardRef((function(a,u){var s=a.className,c=void 0===s?"":s,i=a.maxLength,o=a.error,m=a.handleChange,h=r.__rest(a,["className","value","maxLength","error","info","handleChange"]),v=t.useRef(),f=t.useState(0),g=e(f,2),d=g[0],x=g[1],b=t.useCallback((function(e){var r=e.target,t=r.value,a=r.name;m&&m(t,a),h.onChange&&h.onChange(e),x(t.length)}),[m,h]);return t.useEffect((function(){var e;v.current&&x((null!==(e=v.current.value)&&void 0!==e?e:"").length)}),[]),t.useEffect((function(){v.current&&v.current.value.length>i&&(v.current.value=v.current.value.slice(0,i),dispatchEvent(new Event("change",{bubbles:!0})))}),[i]),t.useImperativeHandle(u,(function(){return v.current})),t.createElement("div",{className:l(c,"text-area",{error:o})},t.createElement("textarea",Object.assign({ref:v},h,{maxLength:i,onChange:b})),!!i&&t.createElement("p",{className:l("text-count")},t.createElement("strong",null,n.commaWithValue(d)),"/",n.commaWithValue(i)))}));s.displayName="TextArea",module.exports=s;
