'use client';
"use strict";var e=require("../../../_virtual/_tslib.js"),t=require("react"),r=require("../../../utils/forReactUtils.js"),n=require("../../../assets/svgs/ico-input-reset.svg.js"),a=require("../../../assets/svgs/ico-search-default.svg.js"),s=require("./TextInput.module.scss.js");const l=r.makeCxFunc(s),u=t.forwardRef(((r,s)=>{const{className:u="",error:o,info:c,hideBtnReset:i,prefixIcon:d,searchIcon:m=t.createElement(a,null),resetIcon:f=t.createElement(n,null),handleChange:v,handleReset:h,handleEnter:p,validate:g}=r,b=e.__rest(r,["className","error","info","hideBtnReset","prefixIcon","searchIcon","resetIcon","handleChange","handleReset","handleEnter","validate"]),y=e.__rest(b,["value"]),E=t.useRef(null),[C,x]=t.useState(!1),[I,N]=t.useState(""),k=t.useMemo((()=>{const{type:e,readOnly:t}=b;return{reset:C&&!i&&!!I&&!t,search:"search"===e}}),[b,I,C,i]),q=t.useCallback((e=>e&&g?"function"==typeof g?g(e):"string"==typeof e?g.test(e)?e:I:e:e),[I,g]),w=t.useCallback((()=>{const e=b.name;N(""),v&&v("",e),h&&h("",e,!0)}),[b.name,v,h]),R=t.useCallback((e=>{const{name:t}=e.target;let r=e.target.value;if(r===I)return;"number"==typeof b.value&&(r=Number(r));const n=q(r);v&&v(n,t),b.onChange&&b.onChange(e),N(n),E.current.value=String(n),""===n&&h&&h("",t)}),[I,q,v,b,h]),j=t.useCallback(((e,t)=>{x(t),t?b.onFocus&&b.onFocus(e):b.onBlur&&b.onBlur(e)}),[b]),_=t.useCallback((e=>{var t;const{value:r="",name:n}=e.target;p&&p(r,n),null===(t=E.current)||void 0===t||t.blur()}),[p]),B=t.useCallback((e=>{"Enter"!==e.key||e.nativeEvent.isComposing||_(e),b.onKeyDown&&b.onKeyDown(e)}),[b,_]);return t.useEffect((()=>{void 0!==b.value&&(N(b.value),E.current.value=String(b.value))}),[b.value]),t.useEffect((()=>{E.current&&"function"==typeof E.current.scrollTo&&E.current.scrollTo(window.innerWidth,0)}),[k.reset]),t.useImperativeHandle(s,(()=>E.current)),t.createElement("div",{className:l("text-input",u,b.type,{focus:C,filled:!!I,readonly:b.readOnly,disabled:b.disabled,required:b.required,error:o,info:c})},t.createElement("div",{className:l("input-area")},k.search&&t.createElement("span",{className:l("ico-prefix")},m),!k.search&&!!d&&t.createElement("span",{className:l("ico-prefix")},d),k.reset&&t.createElement("button",{className:l("ico-reset"),onMouseDown:w,onTouchStart:w},f),t.createElement("input",Object.assign({ref:E},y,{defaultValue:I,onChange:R,onFocus:e=>j(e,!0),onBlur:e=>j(e,!1),onKeyDown:B}))))}));u.displayName="TextInput";var o=u;module.exports=o;
