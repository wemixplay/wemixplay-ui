"use strict";var e=require("@babel/runtime/helpers/slicedToArray"),r=require("@babel/runtime/regenerator"),n=require("../../_virtual/_tslib.js"),t=require("react"),a=require("../../utils/forReactUtils.js"),i=require("../../utils/etcUtils.js"),s=require("./Table.module.scss.js"),l=a.makeCxFunc(s),u=function(a){var s=a.className,u=void 0===s?"":s,c=a.children,o=a.expendOpen,p=void 0!==o&&o,d=a.handleExpendChange,f=a.beforeExpendOpen,v=a.onClick,m=t.useRef(null),b=t.useState(p),x=e(b,2),h=x[0],y=x[1],g=t.useCallback((function(e){if(m.current){var r="boolean"==typeof e?e:!h,n=m.current.firstChild;n&&(n.style.maxHeight=r?"".concat(n.scrollHeight,"px"):"0px")}}),[m,h]),E=t.useCallback((function(){return n.__awaiter(void 0,void 0,void 0,r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!f||h){e.next=6;break}return e.next=4,f();case 4:return e.next=6,i.wait(10);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0);case 11:return e.prev=11,y(!h),d&&d(!h),e.finish(11);case 15:case"end":return e.stop()}}),e,null,[[0,8,11,15]])})))}),[h,d,f]),A=t.useMemo((function(){var e=function(r){return r.flatMap((function(r){var n;return(null==r?void 0:r.props)?"TdColumn"===(null===(n=r.type)||void 0===n?void 0:n.displayName)?Object.assign(Object.assign({},r),{props:Object.assign(Object.assign({},r.props),{handleExpendToggle:E,expendOpen:p})}):Array.isArray(r.props.children)?e(r.props.children):[]:[]}))},r=Array.isArray(c)?c:[c];return e(r)}),[c,p,E]),j=t.useMemo((function(){var e=function(r){return r.flatMap((function(r){var n;if(null==r?void 0:r.props)return"TdExpend"===(null===(n=r.type)||void 0===n?void 0:n.displayName)?r:Array.isArray(r.props.children)?e(r.props.children):void 0}))},r=Array.isArray(c)?c:[c];return e(r).filter((function(e){return e}))[0]}),[c]);return t.useEffect((function(){g(h)}),[h,g]),t.useEffect((function(){void 0!==p&&y(p)}),[p]),t.createElement(t.Fragment,null,t.createElement("tr",{className:l(u,"table-row"),onClick:v},A),!!j&&t.createElement("tr",{className:l("expend-tr")},t.createElement("td",{ref:m,className:l("expend-table-cell",{open:h}),colSpan:A.length},j)))};u.displayName="TableRow",module.exports=u;
