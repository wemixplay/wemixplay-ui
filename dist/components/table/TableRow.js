"use client";
"use strict";var e=require("../../_virtual/_tslib.js"),r=require("react"),l=require("../../utils/forReactUtils.js"),t=require("../../utils/etcUtils.js"),a=require("./Table.module.scss.js");const s=l.makeCxFunc(a),n=l=>{let{className:a="",children:n,expendOpen:i=!1,handleExpendChange:o,beforeExpendOpen:c,onClick:p}=l;const d=r.useRef(null),[u,m]=r.useState(i),y=r.useCallback((e=>{if(d.current){const r="boolean"==typeof e?e:!u,l=d.current.firstChild;l&&(l.style.maxHeight=r?"".concat(l.scrollHeight,"px"):"0px")}}),[d,u]),f=r.useCallback((()=>e.__awaiter(void 0,void 0,void 0,(function*(){try{c&&!u&&(yield c(),yield t.wait(10))}catch(e){console.error(e)}finally{m(!u),o&&o(!u)}}))),[u,o,c]),v=r.useMemo((()=>{const e=r=>r.flatMap((r=>{var l;return(null==r?void 0:r.props)?"TdColumn"===(null===(l=r.type)||void 0===l?void 0:l.displayName)?Object.assign(Object.assign({},r),{props:Object.assign(Object.assign({},r.props),{handleExpendToggle:f,expendOpen:i})}):Array.isArray(r.props.children)?e(r.props.children):[]:[]})),r=Array.isArray(n)?n:[n];return e(r)}),[n,i,f]),b=r.useMemo((()=>{const e=r=>r.flatMap((r=>{var l;if(null==r?void 0:r.props)return"TdExpend"===(null===(l=r.type)||void 0===l?void 0:l.displayName)?r:Array.isArray(r.props.children)?e(r.props.children):void 0})),r=Array.isArray(n)?n:[n];return e(r).filter((e=>e))[0]}),[n]);return r.useEffect((()=>{y(u)}),[u,y]),r.useEffect((()=>{void 0!==i&&m(i)}),[i]),r.createElement(r.Fragment,null,r.createElement("tr",{className:s(a,"table-row"),onClick:p},v),!!b&&r.createElement("tr",{className:s("expend-tr")},r.createElement("td",{ref:d,className:s("expend-table-cell",{open:u}),colSpan:v.length},b)))};n.displayName="TableRow";var i=n;module.exports=i;
