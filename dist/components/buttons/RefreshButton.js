"use strict";var e=require("@babel/runtime/helpers/slicedToArray"),r=require("react"),n=require("../../utils/forReactUtils.js"),t=require("../../assets/svgs/ico-refresh.svg.js"),c=require("./RefreshButton.module.scss.js"),u=n.makeCxFunc(c),s=function(n){var c=n.className,s=void 0===c?"":c,a=n.duration,i=void 0===a?5:a,o=n.showCount,l=void 0===o||o,f=n.iconElement,d=void 0===f?r.createElement(t,null):f,m=n.disabled,b=void 0!==m&&m,v=n.onClick,E=n.onRefresh,h=r.useRef(null),C=r.useRef(i||!1),k=r.useRef(),R=r.useState(!1),p=e(R,2),q=p[0],w=p[1],N=r.useCallback((function(){window.clearInterval(h.current),h.current=null}),[]),j=r.useCallback((function(){h.current&&N(),i&&k.current&&(C.current=i,k.current.innerHTML="".concat(C.current),h.current=window.setInterval((function(){"number"==typeof C.current&&C.current>0?C.current-=1:C.current=i,w(0===C.current),k.current.innerHTML="".concat(C.current>0?C.current:"")}),1e3))}),[i,N]),T=r.useCallback((function(e){q||(w(!0),j(),v&&v(e))}),[q,v,j]);return r.useEffect((function(){q&&0===C.current&&(C.current=-1,E&&E())}),[E,q]),r.useEffect((function(){j()}),[j]),r.useEffect((function(){b?N():j()}),[b,j,N]),r.useEffect((function(){return function(){h.current&&N()}}),[N]),r.createElement("span",{className:u("refresh",s)},r.createElement("button",{className:u("btn-refresh"),onClick:T,disabled:b},r.createElement("i",{className:u("btn-refresh-ico",{refreshed:q}),onAnimationEnd:function(){return w(!1)}},d),l&&!!i&&r.createElement("span",{ref:k,className:u("btn-refresh-count")})))};module.exports=s;
