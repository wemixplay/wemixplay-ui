"use strict";var e=require("../../../../_virtual/index.js");require("../fs/index.js");var r=require("../copy/index.js"),t=require("../remove/index.js"),i=require("../mkdirs/index.js"),s=require("../path-exists/index.js"),a=require("../util/stat.js"),n=require("path");const o=e.__exports,c=n,{copy:u}=r.copy,{remove:d}=t.remove_1,{mkdirp:m}=i.mkdirs,{pathExists:p}=s.pathExists_1,v=a.stat;var w=async function(e,r,t={}){const i=t.overwrite||t.clobber||!1,{srcStat:s,isChangingCase:a=!1}=await v.checkPaths(e,r,"move",t);await v.checkParentPaths(e,s,r,"move");const n=c.dirname(r);return c.parse(n).root!==n&&await m(n),async function(e,r,t,i){if(!i)if(t)await d(r);else if(await p(r))throw new Error("dest already exists.");try{await o.rename(e,r)}catch(i){if("EXDEV"!==i.code)throw i;await async function(e,r,t){const i={overwrite:t,errorOnExist:!0,preserveTimestamps:!0};return await u(e,r,i),d(e)}(e,r,t)}}(e,r,i,a)};exports.move_1=w;
